# Пайплайн загрузки и обработки данных о драгоценных металлах ЦБ РФ

## Архитектура
1. **NiFi** (Apache NiFi) - загрузка данных с сайта ЦБ РФ
2. **PostgreSQL** - хранение сырых и обработанных данных
3. **dbt** (Data Build Tool) - трансформация данных
4. **Airflow** - оркестрация пайплайна
5. **Redash** - визуализация данных

## Схемы базы данных
- **raw** - сырые данные из ЦБ РФ
- **staging** - очищенные данные (views)
- **dds** - детализированные данные (таблицы фактов и измерений)
- **mart** - витрины данных для аналитики

## Модели dbt
### staging
- `stg_cbr_precious_metals` - очищенные данные о ценах на металлы

### dds
- `dim_metals` - справочник металлов
- `fact_metal_prices` - таблица фактов по ценам

### mart
- `metal_prices_analytics` - витрина для аналитики

## Расписание
- Airflow DAG `cbr_metals_daily_etl` запускается ежедневно в 13:00
- DBT трансформация и тесты выполняются автоматически

## Мониторинг
- Airflow UI: http://localhost:8081
- Redash: http://localhost:5000
- PostgreSQL: localhost:5432
